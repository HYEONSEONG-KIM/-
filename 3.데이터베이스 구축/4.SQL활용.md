# SQL활용

## 113.프로시저(Procedure)
- 절차형 SQL을 활용하여 특정 기능을 수행하는 일종의 트랜잭션 언어로, 호출을 통해 실행되어 미리 저장해 놓은 SQL작업 수행
- DECLARE.....BEGIN.....END 형식
- 생성 : CREATE (OR REPLACE) PROCEDUE 사용
- 실행 : EXECUTE 프로시저명
- 삭제 : DROP PROCEDURE 프로시저명


## 114.트리거(Trigger)
- DB 시스템에서 데이터의 삽입, 갱신, 삭제등의 이벤트가 발생할 때마다 관련 작업이 자동으로 수행되는 절차형 SQL
- DB에 저장되며, 데이터 변경 및 무결성 유지, 로그 메시지 출력등의 목적으로 사용
- DCL사용 불가
- DECLARE.....EVENT.....BEGIN.....END 형식
- 동작시기에 따라 BEFORE, AFTER로 나뉨


## 115.사용자 정의 함수
- 프로시저와 유사하게 SQL을 사용하여 일련의 작업을 연속적으로 처리하며, 종료 시 처리 결과를 단일값으로 반환하는 정차형 SQL
- DB에 저장되어 select, insert, delete, update 등의 DML문의 호출에 의해 사용
- 테이블 조작은 할 수 없고 select를 통한 조회만 가능
- 반환값을 통해 출력

 ## 116.DBMS 접속 기술
 - DBMS 접속 : 사용자가 데이터를 사용하기 위해 응용 시스템을 이용하여 DBMS에 접근하는 것을 의미
 - JDBC : Java언어로 다양한 종류의 DB에 접속하고 SQL문을 수행할 때 사용되는 표준 API, 드라이버 필요
 - ODBC : 표준 개방형 API로 개발언어에 관계없이 사용, 드라이버 필요, DBMS의 종류를 몰라도 됨
 - MyBatis : JDBC 코드를 단순화하여 사용할 수 있는 SQL Mapping 기반 오픈 소스 접속 프레임워크
 - 동적SQL : 개발 언어에 삽입되는 SQL코드를 문자열 변수에 넣어 처리하는 것으로, 조건에 따라 SQL구문을 동적으로 변경하여 처리할 수 있음

 ## 117.SQL 테스트
- SQL이 작성 의도에 맞게 원하는 기능을 수행하는지 검증하는 과정
- 단문 SQL 테스트 : DDL, DML, DCL이 포함되어 있는 SQL과 TCL을 테스트하는 것, 직접 실행하여 결과물을 확인
	- DESCRIBE 명령어를 이용하면 DDL로 작성된 테이블이나 뷰의 속성, 자료형 옵션들을 바로 확인
- 절차형 SQL 테스트 : 프로시저, 사용자 정의 함수, 트리거 등의 절자형 SQL은 디버깅을 통해 기능의 적합성 여부를 검증하고, 실행을 통해 결과를 확인하는 테스트를 수행


## 118.ORM(Object Relational Mapping)
- 객체지향 프로그래밍의 객체와 관계형 데이터베이스의 데이터를 연결하는 기술
	- 프로그래밍 코드 또는 데이터베이스와 독립적이므로 재사용 및 유지보수가 용이
	- SQL코드를 직접 입력하지 않고 선언문이나 할당 같은 부수적인 코드가 생략되기 때문에 직관적이고 간단하게 데이터를 조작할 수 있음
- ORM의 한계
	- SQL이 자동으로 작성되기 때문에 의도대로 SQL이 작성되었는지 확인필요
	- 객체지향적인 사용을 고려하고 설계된 DB가 아닌 경우 프로젝트가 크고 복잡해질수록 ORM 기술을 적용하기 어려움


## 119.쿼리 성능 최적화
- 데이터 입출력 애플리케이션의 성능 향상을 위해 SQL코드를 최적화 하는 것
	- 쿼리 성능을 최적화하기 전에 성능 측정 도구인 APM을 사용하여 최적화 할 쿼리를 선정
- 실행 계획 : DBMS의 옵티 마이저가 수립된 SQL 코드의 실행 절차와 방법을 의미 => EXPLAIN 명령어를 통해 확인할 수 있음
- 쿼리 성능 최적화 : 실행 계획에 표시된 연산 순서, 조인 방식, 테이블 조회 방법 등을 참고하여 SQL문이 더 빠르고 효율적으로 작동하도록 SQL코드와 인덱스를 재구성
	- SQL 코드 재구성 : WHERE절을 추가하여 일부 레코드만 조회, WHERE절에 연산자가 포함 되면 인덱스 사용 불가, IN 보다는 EXISTS 사용
	- 인덱스 재구성 : 인덱스의 추가 및 변경은 다른 SQL에도 영향을 줄 수 있으므로 신중히 결정, 불필요한 인덱스 제거